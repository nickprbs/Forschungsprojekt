import altair as alt
import pandas as pd
import vegafusion as vf

# Enable the data server transformer
alt.data_transformers.enable('data_server')

# Load dataset from CSV file
data = pd.read_csv(r"D:\Forschungsprojekt\filtered_climate_data.csv")

# Convert 'Time' column to datetime
data['Time'] = pd.to_datetime(data['Time'])

# Downsample or aggregate the data if necessary
# For example, you can aggregate the data by taking the mean temperature for each unique combination of Longitude and Latitude
aggregated_data = data.groupby(['Longitude', 'Latitude']).agg({'Temperature': 'mean'}).reset_index()

# Create scatter plot
scatter_plot_climate = alt.Chart(aggregated_data).mark_circle(size=60).encode(
    x='Longitude:Q',
    y='Latitude:Q',
    color='Temperature:Q',
    tooltip=['Longitude:Q', 'Latitude:Q', 'Temperature:Q']
).interactive()

# Save as HTML
scatter_plot_climate.save(r'C:\Users\juliu\OneDrive\Desktop\Informatik_Studium\5.Semester\Bachelor Forschungsprojekt\Forschungsprojekt\Forschungsprojekt\plots\scatter_plot_climate_yearly_average_2015.html')

print("Chart saved as scatter_plot_climate.html")
{"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "vconcat": [{"hconcat": [{"layer": [{"mark": {"type": "geoshape", "fill": "aliceblue"}, "data": {"sphere": true}}, {"mark": {"type": "geoshape", "fill": "mintcream", "stroke": "black"}, "data": {"url": "https://raw.githubusercontent.com/vega/vega-datasets/refs/heads/main/data/world-110m.json", "format": {"feature": "countries", "type": "topojson"}, "name": "world"}}, {"mark": "circle", "data": {"url": "https://raw.githubusercontent.com/nickprbs/Forschungsprojekt/refs/heads/main/yearly_avg_downsampled.csv", "format": {"type": "csv"}, "name": "temperature"}, "encoding": {"color": {"field": "tas", "legend": {"title": "Temperature (K)"}, "scale": {"domain": [270, 300], "scheme": "viridis"}, "type": "quantitative"}, "latitude": {"field": "latitude", "type": "quantitative"}, "longitude": {"field": "longitude", "type": "quantitative"}, "tooltip": [{"field": "tas", "title": "Temperature (K)", "type": "quantitative"}, {"field": "latitude", "type": "quantitative"}, {"field": "longitude", "type": "quantitative"}, {"field": "year", "title": "Year", "type": "quantitative"}]}, "transform": [{"calculate": "datum.lon", "as": "longitude"}, {"calculate": "datum.lat", "as": "latitude"}, {"calculate": "timeParse(datum.time, '%Y-%m-%d')", "as": "parsed_date"}, {"calculate": "year(datum.parsed_date)", "as": "year"}, {"filter": "datum.year == time"}, {"calculate": "datum.longitude >= 180 ? datum.longitude -360 : datum.longitude", "as": "longitude"}, {"filter": "(longitude * -1) - 90 < datum.longitude && datum.longitude < (longitude * -1) + 90"}]}], "height": 350, "projection": {"clipAngle": 90, "rotate": {"expr": "[longitude, 0]"}, "type": "orthographic"}, "width": 400}, {"layer": [{"mark": {"type": "bar"}, "encoding": {"color": {"condition": [{"param": "param_1", "value": "orange", "empty": false}], "value": "lightgray"}, "x": {"axis": {"labelAngle": 0}, "field": "year_group", "title": "Year (Interval of 5)", "type": "ordinal"}, "y": {"aggregate": "mean", "field": "tas", "scale": {"domain": [250, 300]}, "title": "Average Surface Temperature (K)", "type": "quantitative"}}, "name": "view_1", "transform": [{"calculate": "floor(year(datum.time)/5)*5", "as": "year_group"}]}, {"mark": {"type": "line", "color": "red", "strokeWidth": 3}, "encoding": {"x": {"axis": null, "field": "years", "scale": {"domain": [2015, 2099]}, "type": "quantitative"}, "y": {"aggregate": "mean", "field": "tas", "scale": {"domain": [250, 300]}, "type": "quantitative"}}, "transform": [{"calculate": "year(datum.time)", "as": "years"}]}], "data": {"url": "https://raw.githubusercontent.com/nickprbs/Forschungsprojekt/refs/heads/main/yearly_avg_downsampled.csv"}, "height": 350, "resolve": {"axis": {"x": "shared", "y": "shared"}}, "width": 400}]}, {"hconcat": [{"mark": {"type": "line", "opacity": 0.5}, "encoding": {"color": {"field": "tas", "scale": {"scheme": "viridis"}, "title": "TAS", "type": "quantitative"}, "detail": {"field": "index", "type": "ordinal"}, "x": {"field": "key", "sort": ["lat_norm", "tas_norm", "lon_norm"], "title": "Attribute", "type": "nominal"}, "y": {"field": "value", "title": "Normalized Value", "type": "quantitative"}}, "height": 350, "name": "view_3", "transform": [{"window": [{"op": "count", "as": "index"}]}, {"calculate": "toNumber(year(datum.time))", "as": "year_num"}, {"calculate": "toNumber(datum.lat)", "as": "lat_num"}, {"calculate": "toNumber(datum.lon)", "as": "lon_num"}, {"joinaggregate": [{"op": "min", "field": "year_num", "as": "min_year"}, {"op": "max", "field": "year_num", "as": "max_year"}, {"op": "min", "field": "lat_num", "as": "min_lat"}, {"op": "max", "field": "lat_num", "as": "max_lat"}, {"op": "min", "field": "lon_num", "as": "min_lon"}, {"op": "max", "field": "lon_num", "as": "max_lon"}, {"op": "min", "field": "tas", "as": "min_tas"}, {"op": "max", "field": "tas", "as": "max_tas"}]}, {"calculate": "(datum.year_num - datum.min_year) / (datum.max_year - datum.min_year)", "as": "year_norm"}, {"calculate": "(datum.lat_num - datum.min_lat) / (datum.max_lat - datum.min_lat)", "as": "lat_norm"}, {"calculate": "(datum.lon_num - datum.min_lon) / (datum.max_lon - datum.min_lon)", "as": "lon_norm"}, {"calculate": "(datum.tas - datum.min_tas) / (datum.max_tas - datum.min_tas)", "as": "tas_norm"}, {"filter": {"param": "Select Year"}}, {"sample": 500}, {"fold": ["lat_norm", "tas_norm", "lon_norm"]}], "width": 400}, {"mark": {"type": "circle"}, "encoding": {"color": {"field": "tas", "scale": {"domain": [240, 315], "scheme": "viridis"}, "title": "TAS", "type": "quantitative"}, "x": {"field": "lon", "scale": {"domainMax": 360}, "type": "quantitative"}, "y": {"field": "lat", "type": "quantitative"}}, "height": 350, "name": "view_4", "transform": [{"calculate": "toNumber(year(datum.time))", "as": "year"}, {"filter": {"param": "Select Year"}}], "width": 400}], "data": {"url": "https://raw.githubusercontent.com/nickprbs/Forschungsprojekt/refs/heads/main/yearly_avg_downsampled.csv"}}], "params": [{"name": "longitude", "bind": {"input": "range", "max": 90, "min": -90, "step": 1}, "value": 0}, {"name": "time", "bind": {"input": "range", "max": 2099, "min": 2015, "step": 1}, "value": 2015}, {"name": "param_1", "select": {"type": "interval", "encodings": ["x"]}, "views": ["view_1"]}, {"name": "Select Year", "select": {"type": "point", "fields": ["year_num"]}, "bind": {"input": "range", "max": 2099, "min": 2015, "name": "Year", "step": 1}, "value": 2015, "views": ["view_3"]}, {"name": "Select Year", "select": {"type": "point", "fields": ["year"]}, "bind": {"input": "range", "max": 2099, "min": 2015, "name": "Year", "step": 1}, "value": 2015, "views": ["view_4"]}], "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json"}